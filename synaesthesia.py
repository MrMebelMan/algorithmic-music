Clock.set_time(0)

Clock.bpm = 133
var.pat = [31, 1] * 4 + [28, 4] * 2 + [56, 8]
var.brk = var([1, 0], var.pat)
p1 >> pluck(
    dur=PDur(3, 8), sus=[[1, 2], 1, 1, 1],
    room=1, mix=[0.1, 0.2, 0, 0],
    lpf=P[
        var([1000, 900, 800], 32), [750, var([750, 900], 64)], [1200, 500], var([700, 1000, 1200, 1500, 1850], [128, 64])
    ],
    lpr=var([1, 0.75, 0.5, 0.25], 128),
    blur=var([1, 2.5, 4], 256),
    hpf=P[var([800, 400, 900, 250], [64, 32]), [var([250, 800], [32, 32, 64, 64]), 600], [var([180, 800], [[32, 64], 32, 128, 64]), 200, 250, 300]],
    hpr=expvar([1, 0.25], [128, 64]),
    chop=4,
    amp=var([int(var([0, 1], [[512, 256], 256])), 1], [[14, 8, 2], [2, 8, 2], 7, 1, 8, 8, 28, 4]) * var([1.3, 0], [256, 128, 128, 64]) * 0.83
)
p2 >> pluck(
    dur=PDur(4, 8),
    room=[1, 0.5], mix=[0, 0, [0.2, 0.15], [0.2, 0, 0, 0.15]],
    lpf=P[
        [600, 800], 700, 800, 900,  [450, 1250], 800, 500, 900,
        var([550, 750, 1000, 1250], [128, 64, 32]), [250, 1200], 750, var([500, 750, 800], [128, 64, 64]),  1000, [800, 950], 1100, [900, 500, 400],
    ],
    hpf=[[750, var([750, 500], 64)], var([500, 700], 8), var([250, 500], [64, 32]), [200, 350]], hpr=expvar([0.25, 0.5], 256),
    sus=1,
    chop=4,
    amp=var([0, 1], [256, 128, 128, 64])
)

ad >> sawbass(
    dur=0.25,
    pan=PWhite(-0.7, 0.7),
    delay=var([0, 0.25], 256),
    hpf=P[var([500, 400], [128, 64]), [200, var([200, 350], [64, 128])], P[800, 900] * var([1, 0.5], [32, 64, 128]), var([450, 350, 300], 64)],
    hpr=[0.15, 0.2, 0.25],
    chop=8, #var([8, 2], [[64, 128], [64, 32]]),
    amp=P[1, [0.25, 0.75], 0.15, 0.6] * var([int(var([1, 0], 256)), 1], [14, 2, 7, 1, 8, 8, 28, 4]) * 0.9
)
ad.amp = P[1, [0.25, 0.75], 0.15, 0.6] * var([int(var([1, 0.75], [[256, 512], 256])), 0.75], [[14, 8, 2], [2, 8, 2], 7, 1, 8, 8, 28, 4]) * 1
ad.amp = P[1, [0.25, 0.75], [0.15, 0.4], 0.6] * var([int(var([1, 0], [[256, 512], 256])), 0], [[14, 8, 2], [2, 8, 2], 7, 1, 8, 8, 28, 4]) * 1

j1 >> jbass(dur=1, hpf=[var([225, 235], 8), [200, var([210, 190], 64)]], hpr=expvar([0.5, 0.25], [16, 32, 64]), chop=[4] * 15 + [2], amp=expvar([0.95, 1.25], 8) * var([0, 1.2], [128, 64, 64, 128, 32, [32, 64], 64, [64, 128]]))

rc >> play('~', pan=PWhite(-0.3, 0.3), sample=0, dur=0.5, lpf=P[6500, 4500], amp=P[1, 0.95] * expvar([0, 0, 1], [[32, 32, 64], [32, 32, 64], 0]))

sh >> play('s', dur=0.25,
    lpf=P[5000, [1000, 500], [2000, 4500],  [5000, 1000], [1500, 2500], [2500, 2000, 2000, 500], [3000, 8000]] * expvar([0.4, 1], [32, 32, 64]),
    amp=P[1, 0.85] * expvar([0, 0, 1, 1], [64, [64, 32, 64, 128], [128, 256, 64], 0]) * var([0, 0.8], [[128, 128, 64], [64, 64, 32]])
)
s1 >> play('s', sample=4, dur=0.25, delay=0.5, lpf=[4000, 3500, 5500], lpr=expvar([1, 0.75], 128), amp=sh.amp)
t2 >> play('t', sample=2, dur=0.25, amp=P[1, [0.25, 0.5], [0.5, 0.25], 0.75, [0.5, 0.75], [0, 0, 0, 1], [0, 0, 0.25, 0.75], 0] * expvar([0, 0, 0.75, 0.75], [[128, 64], [64, 32, 64], [128, 64, 256], 0]))

rs >> play('u', sample=1, dur=var([16, 8, 4, 2, 1], 128), amp=var([0, 0.15], [128, 128, 64, 128]))

h1 >> play('|s1|',
    pan=PWhite(-0.75, 0.75),
    room=1, mix=PWhite(0.1, 0.2),
    dur=0.25,
    lpf=P[[1500, 1250], var([1300, 1200, 1100, 1000, 900], 64), [1250, var([1250, 500], 128)], [950, 800, 900, 850]] * 2.5,
    amp=expvar([0.9, 0, 0], [[8, 32, 8, 32, 16, 64], 0])
)

u1 >> play('u', dur=16, delay=0.5, amp=var([0, 0.3], [[128, 64], 256]))
h2 >> play('t',
    sample=var([3, 1], 128),
    dur=0.25,
    pan=PWhite(-0.8, 0.8),
    bend=var([0, 0.5, -0.5], [64, [32, 128], 32]),
    slide=var([0, 0.5, 0.25], [64, [32, 64], 32]),
    lpf=expvar([1500, 4000], [[32, 32, 64], 0]),
    amp=expvar([1, 0.75, 1, 0.5], 1/3) * var([0, 0.5], [64, [64, 128], [32, 64], [32, 64, 128], 64, 128, 64, [64, 32]])
)
cl >> play('H', sample=1, dur=var([8, 4], [[128, 256], [64, 128]]), delay=0.5, room=1, mix=0.15, amp=0.2)
h3 >> play('-', sample=0, room=0.25, mix=0.4, dur=[1] * 30 + [0.25, 0.75, 0.5, 0.5], lpf=expvar([3000, 8000], [[128, 128, 0], [0, 0, 128]]), delay=0.5, amp=var([0, 1.5], [[64, 128, [64, 32]], [128, 256, [32, 64]]]) * var.brk)

kd >> play('X', sample=1, hpf=var([250, 240, 230, 220, 210, 200], 64) * 1.25, hpr=0.5, dur=1, amp=var([1, 0], [[256, 128, 64], [128, 64, 32]]) * var.brk * 1.15)
k2 >> play('m', dur=1, hpf=var([70, 80, 90], 64) + 60, lpf=var([800, 1200], var.pat), lpr=0.25, amp=var([0, 2.25, 0, 1.5], [128, 256]) * kd.amp * var([0, 1], [64, 128, 128, 64, 28, 4, 56, 8]) * 0.35)
k3 >> play('X', sample=var([1, 2], [512, 256]), room=0.5, mix=0.1, lpf=var([300, 500, 760, 1000], 64), dur=1, amp=var([1, 0], [[256, 128, 64], [128, 64, 32]]) * var.brk * var([0, 1], [256, 512, 64]))

sk >> play('x', dur=0.25, delay=0.9, lpf=280, amp=P[[1, var([0, 1], [64, 32, 128, 64])], var([0, 0.4], [128, 64]), var([0, 0.75], [128, 64]), 0, 0, 0, 0, 0] * var([1, 0], [[256, 128], [64, 64, 128]]) * (kd.amp * 0.4))
s2 >> play('x', dur=1, delay=0.5, lpf=500, amp=P[0, 1, 0, [var([0, 1], [[128, 64], [64, 128]])] * var([0, 1.25], [32, 64, 128]), var([0, 1], 256)] * kd.amp * 0.8)

Group(s2, h2, sk, h3, kd, sk, k2, j1, h1, p1).stop()
