# https://soundcloud.com/kitty_clock/lifeweb

Clock.bpm = 150
eeri = SynthDef('eeri')
var.brk = var([1, 0], [56, 8, 31, 1, 31, 1, 28, 4, 28, 4, 120, 8])
var.hi_amp = var([1, 0], [512, 256, 256, 128, 128, 64, 64, 32])
var.fade_in = expvar([0, 1, 1], [128, inf]) # * 0.001

tt >> play('t', sample=1, dur=0.5, lpf=1000 * expvar([0.5, 1.5], [32, 0]), amp=P[0.75, 1] * var([0, 0.25], [[64, 256, 128], [32, 128, 128], 128, 256, 64, 128]) * var.hi_amp * var.fade_in)
h2 >> play('=', room=1, mix=0.15, pan=expvar([-0.35, 0.35], 8), sample=1, dur=0.5, delay=0, amp=P[0.5, 1] * var([0, 0.65], [32, 64, 32, 128, 256, 64, 128, 256]) * var.hi_amp * var.fade_in)
rs >> play('x', sample=0, dur=var([16, 8, 4, 2, 1], [64, 64, 64, 64, 128]), delay=0, amp=0.9 * var.brk * var.hi_amp * var.fade_in)
cl >> play('H', sample=1, dur=var([8, 4, 2], [32, 16, 8, 8, 64, 32, 32]), delay=var([0, 0.5], [128, 64, 64, 32, 32, 128, 32]), amp=0.07 * var.hi_amp * var.fade_in)
sh >> play('s', room=1, mix=0.1, dur=1, delay=0.5, amp=expvar([0, 0, 1, 1], [[64, 0, 32, 128], [64, 32, 128, 32, 64, 0, 64], [64, 0, 128, 0, 32, [32, 64]], [0, 64, 0, 0, 32]]) * var.hi_amp * var.fade_in)
ss >> play('S', dur=0.5, amp=P[0.5, 1] * var([0, 1], [64, 128, 64, 64, 32, 64, 128, 128, 128, 64]) * expvar([0.35, 0.5], [32, 0]) * 0.5 * var.hi_amp * var.fade_in)
rc >> play('~', dur=0.25, amp=P[1, [0.8, var([0.1, 0.5, 0.85, 0.95], 32)], 1, 0.85] * expvar([0, 0, 1], [[[64, 128], [128, 64, 256]], [128, 64, 256, 128], 0]) * var.hi_amp * var.fade_in)
h1 >> play(':', sample=P[2, var([1, 2, 1, 0], [32, 32, 64, 64]), var([0, 2], 64), var([0, 1, 2], [64, 32, 32])], dur=0.25, delay=0.5, lpf=expvar([3000, 4000], [[16, 32, 64, 8, 8, 4, 4], 0]), lpr=0.5,
    amp=P[
        1, var([0.25, 1, 0.25, 0.5], 16), 1, [0.75, var([0, 1, 0.5, 0.75], [8, 4, 32, 16, 16]), 0.25, 0.5]
    ] * expvar([0, 0.5], [64, 128, 128, 256, 64, 32]) * 0.85 * var([0, 1], [256, 64, 128, 32, 64, 32, 256, 128, 512, 128]) * var.hi_amp * var.fade_in
)
ns >> play('nu', rate=0.25, sample=var([0, 1, 2, 3, 4, 5], 64), dur=1/8, amp=P[0.5, 1, 1, 1] * expvar([0.75, 0.15], 1/3) * expvar([0.5, 0, 0.5, 0, 0, 0.5], [[128, 64, 256], [4, 8, 2, 4]]) * var.fade_in)
er >> eeri(dur=0.25,
    tremolo=P[var([4, 0], 128), var([0, 4, 2, 0], 64), var([4, 2, 0, 0], [128, 256]), var([4, 2, 0, 4], [64, 256, 128, 128])],
    sus=P[0.1, expvar([0, 0.5], 256), 0.1, expvar([0.5, 0.1], [128, 0])],
    lpf=P[200, 3000, var([500, 110], [256, 128]), [300, 500]],
    lpr=0.5,
    amp=expvar([0, 0.5, 0.5], [256, 512, 0]) * var.fade_in
)
e2 >> eeri(dur=1, tremolo=2, sus=1,
    bend=var([2, 3, -3, 1], [[4, 4, 4, 64], [2, 2, 2, 32], [3, 3, 3, 128], [3, 3, 3, 64], 1, 3, 1, 1, 1]),
    hpf=var([200, 800, 700, 750, 600], 128), hpr=0.25,
    amp=P[[0.75, 0.5], [0.25, 0.25]] * var.fade_in
)
u1 >> play('U', pan=PWhite(-0.75, 0.75), rate=PRand([1, 0.9, 0.95, 1], 64), sample=2, dur=1, delay=0.5,
    amp=0.25 * expvar([0, 1], [4, 9, 2, 16, 8, 28]) * expvar([0, 0, 1, 1], [[256, 128], [128, 64], [128, 256, 512], 4]) * var.fade_in
)
xx >> play('X', sample=1, dur=0.25, lpf=P[P[300, 200], 0, 150, 200] * expvar([1, 1.5], [64, 0]),
    amp=P[1, 0, var.brk * int(var([1, 0], [128, 64, 128, 128, 256, 128, 32, 64, 8, 4, 8, 4, 8, 4])) * P[expvar([0.1, 0.5], [64, 0]), var([0.25, 0.5], [16, 32, 64]), [0.2, 0], [0.3, 0]], var([0, 0.9], [[7, 7, 7, 7, 15, 15, 15, 15, 31, 31, 31, 31, 63, 63, 63, 63], 1])] * 1.35 # * var.brk
)
# xx.amp=P[1, 0, [0, 0.25, [0, 0.25, 0.5, 0.75], 0.5], [0, [0.25, 0], 0, 0, var([0.8, 0], 64), 0, var([0.8, 0], 128), 0]]
# xx.amp = P[1, 0, 0, 0]
rk >> play('X', sample=2, rate=-1, lpf=1000, dur=var([4, 2], [32, 64, 32]), amp=P[1, var([0, 0.5], [32, 64])] * var([0, 0.25], 128) * var([1, 0], [28, 4]) * 0.5)
jb >> jbass(sus=P[0.2, 0.1, [0.2, 0.35, 0.15, 0.4], [0.1, 0.25, 0.1, 0.1]], oct=5, tremolo=2,
    bend=var([0, 0.15, -0.15, 0.2, -0.05, -0.2, 0.1], 32),
    dur=0.25,
    amp=P[1, [0, var([0, 0.1], 64)], 0.55, var([0, 0.3], [64, 32, 128])] * var([1, 0], [31, 1, 28, 4, 64, 0, 31, 1, 28, 4, 128, 0]) * expvar([0, 0, 1, 1], [256, 128, 256, 0])
)
x7 >> play('X', rate=0.8, dur=1, delay=var([0.5, 0], 256), sample=x6.sample, lpf=x6.lpf, lpr=x6.lpr * 1.25, amp=P[1, PWhite(0, 0.85)] * 0.35)
x6 >> play('v',
    rate=expvar([1, 0.9], [128, 0]), dur=0.5,
    lpf=P[
        1,
        [0.85, var([0.9, 0.25], [64, 32]), var([0.9, 0.25], [28, 4]), var([0.9, 0.5], [64, 32, 128, 64, 64])],
        [var([0.5, 0.15, 0.6, 0.4], 64), 1, [0.25, 0.25, 0.25, var([0.25, 0.85], 32)], 0.25],
        var([0.25, 0.75], [[26, 28], [8, 4]])
    ] * expvar([200, [1000, 800, 900, 350]], [256, 0]),
    lpr=expvar([0.5, 0.85], [16, 0]),
    sample=1,
    bend=0.5, # expvar([0.5, 0], [16, 0]),
    amp=P[0, 1, 1, 1] * var([1, 0], [56, 8, 31, 1, 31, 1, 28, 4, 28, 4, 120, 8]) * var([1, 0], [[256, 512], 64])
)

print(Clock.beat / Clock.bpm)
