Clock.clear()
Clock.reset()
Clock.set_time(0)

Clock.bpm = 138

print(SynthDefs)
print(Samples)
print(Attributes)

var.brk = var([1, 0], [31, 1, 28, 4, 56, 8])

rr >> play('r', sample=var([2, 3, 4], [64, 32]), dur=[1] * int(var([3, 7, 15], 64)) + [[0.5, 0.25], [0.5, 0.75]], amp=var([0, 1], [32, 64, 128, 32, 32, 64]))
hh >> play('=', dur=0.25, amp=expvar([0, 0, 2.75], [[32, 32, 64], [32, 32, 64], 0]))
ab >> play('u', sample=var([1, 0], 128), dur=0.25, hpf=P[var([80, 90, 100], 64), 90, [95, 120], 128], hpr=0.25, amp=P[1, [0.85, 0.25], [0.25, 0.5], [0.75, 0]] * var([0, 1], [[64, 64, 32], [32, 64, 128]]))
cl >> play('HIJ', sample=1, dur=var([8, 4, 2], [[128, 64, 32], [64, 128], [128, [256, 64, 32]]]), delay=0.5, amp=P[1, [0.85, 0.9]] * var([0, 0.65], [[[128, 32], 64], [256, 128, 64]]))
rs >> play('D', room=1, mix=0.15, dur=var([8, 4, 2], [64, 64, 128]), amp=var([0, 0.9], [[64, 128], [32, 64]]))
jb >> jbass(dur=[0.25, 0.25, 0.25, 0.25], delay=0.25, oct=4.65,
    lpf=[[380, 550], var([200, 220, 250, 270], 64), 400, var([300, 400])],
    hpf=var([400, 450, 350, 300], 32), hpr=0.25,
    sus=[1.35, var([0.01, 0.25], 64), [0.75, 1.25], [0.5, 0.85]],
    drive=P[0, 0.05, [0, 0.07], [0.013, 0.06]] * 0,
    amp=var([1.35, 0], [[256, 64, 128], [128, 32, 64]]) * var.brk
) 

# yes, a lot

# too much text on the screen I guess

sb >> play('D', bpm=Clock.bpm * 2, dur=0.25,
    amp=P[
        var([0, 0.25], 128), [0, 0.25, 0.5, 0.75], 0.5, [0, 0.75],  [1, var([1, 0], [64, 32])], [0, 0.25, 0.5, 0.25], [0, 0.85], [0, var([0, 0.5], 64)]
    ] * expvar([0, 1], [64, [128, 32], 128])
)
kd >> play('RXX',
    rate=var([1, 0.85, 0.75], [4, 4, 4, 4, 128]),
    sample=var([1, 2, 3], [[512, 256], [256, 128]]),
    dur=1, room=1, mix=0.1,
    lpf=var([2500, 1500, 1000, 500], 128),
    amp=P[1.25, [var([1.25, 0.95], [128, 64]), var([1, 1.25], 256)]] * 1.5 * var.brk
)
h1 >> play('-', sample=var([2, 1, 0], [128, 16, [32, 4]]), dur=kd.dur, delay=0.5, room=1, mix=0.15, lpf=5000, lpr=0.25, amp=var([0, 1], [[64, 32], [128, 64]]))
s1 >> play('s', sample=[1, 2], dur=h1.dur / 2, delay=h1.delay, room=0.85, mix=0.2, amp=P[h1.amp, [h1.amp*0.65, h1.amp*0.5]] * var([1.5, 0], [64, 32, 128, 64]))
rc >> play('~', dur=0.5, amp=P[[2, 0.9], [0.75, 0.85]] * expvar([0, 0, 0.85], [[32, 64], [64, 32], 0]))
tt >> play('t', dur=0.25, sample=1,
    rate=P[1, 1, [1, 1.05], [1, 1, 0.95, 1]],
    lpf=expvar([1500, 900], [[128, 64], 0]), lpr=0.25,
    amp=P[
        [0.75, 0.25], [0, var([0, 0.85], 32)], var([0, 0.5], [64, 128]), [0, 0, 0, var([0, 0.75], [[128, 32, 64], [64, 16, 128]])],
        0.75, 0.25, 0.5, 1
    ] * expvar([1, 0.75, 1, 0], 256) * var([1, 0.5, 1], [32, 64, [32, 64, 128], 16, 8, 2, 8, 2, 4, 128, 64]) # this turns player tt on and off
)
bm >> pulse(oct=4,
    dur=0.25,
    sus=[[1, 0.5, 0.3, 0.25], 0.25, 0.5, [0.5, 0.25]],
    tremolo=8,
    hpf=expvar([200, 500, 250, 500], [16, 8]),
    hpr=expvar([3, 0.25], 32),
    amp=P[1, [0.25, var([0, 0.5], 128)], [0.5, 0.35], 0.3] * expvar([0.25, 1.25], [128, 64, 64, 256]) * var.brk
)
h2 >> play(':', pan=PWhite(-0.5, 0.5), dur=0.25, amp=expvar([1, 0.15], 1/3) * var([1, 0], [[256, 128, 64], [128, 64, 32]]))
rk >> play('X', rate=-1, sample=2, dur=1, delay=0, lpf=1200, lpr=0.5, amp=P[0, 0, 1, 0] * var([0, 0.85], [[256, 128], [128, 64]]))
r2 >> play('X', rate=1, sample=1, dur=0.25, delay=0, lpf=230, lpr=0.8, amp=P[1, 0, [var([0.75, 0], [[128, 256], [64, 128]]), 0.25], 0,  1, 0, 0.25, 0] * var([0, 0.4], 128) * kd.amp)
bl >> play('V', rate=1.15, drive=[[0.05, 0.1], [0.1, 0.05, 0, 0], var([0, 1], [31, 1, 28, 4, 56, 8]), 0], dur=0.25, sample=2, hpf=P[200, [var([400, 200], 128), 800], [var([300, 450]), var([600, 500, 400, 300], 64), 200, [500, 500, 500, 190]], 250], bend=-0.15, hpr=0.5, amp=P[[0.75, 0.5], 0.25] * var([0, 1], [64, 128, 64, 32, 32, 128, 256, 128]))
k2 >> play('I', dur=[[0.25, 0.5, 1, 1, 1], [0.75, 0.5, 1, 1, 1]], lpf=500, lpr=0.25, amp=[[0.25, 0.5, 0.5, 0.75], [1, 0.75], [0.75, 0.5]] * kd.amp)
bs >> dub(dur=0.25, sus=[0.75, 0.25], amp=P[[0.78, 1], [0.5, 0.75]] * expvar([0, 0.6], 256), hpf=P[95, 220] * 0, hpr=var([0.25, 0.15], [[31, 28, 56], [1, 4, 8]]))


@next_bar
def stahp():
    Group(h2, rk, r2, bl, k2, bs, bm, tt, kd).stop()










