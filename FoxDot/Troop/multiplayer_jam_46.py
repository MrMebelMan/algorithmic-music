Clock.bpm = 133
Scale.default = "minor"
Root.default = -2

print(Samples)

print(SynthDefs)

var.dp = P[[8, 16], [4, 8], 2,1, 3, 1, [6, 12], [2, 8], 5, 4, [4, 32], [2, 8, 16], 3, 2, 3, 1]
var.d2 = P[16, 8, 5, 3, [4, 8], [2, 16], [8, 32], [1, 8], 2, 3]

Clock.set_time(0)




# RIP

var.brk = var([1, 0], [31, 1, 31, 1, 28, 4])
var.mad = P[[0.25] * 4 + [0.125] * 8 + [0.5] * 4 + [1] * 56]

trk = P[128,64,64,128,64,64,128,128]
in_ = P[1,0,0,0,0,0,0,0]
bldup = P[0,1,0,0,1,0,0,0]
brk = P[0,0,1,0,0,1,0,0]
drp = P[0,0,0,1,0,0,1,0]
out = P[0,0,0,0,0,0,0,1]

hG = Group(h1)



b1  >> play("V",sample=var([0, 1, 2], 256),dur=1,delay=[0,1/2,[0,1/2],1/2],amplify=P[4/5,2/3]*var([1,0],[[128,256,64],[32,64,128,64]]),amp=var(bldup+brk,trk))

tm >> play('m',dur=0.25,shape=linvar([1/8,1/3],[4,8,12,2,6,16]),amplify=P[[1/2,3/4],[0,1/4],[0,1/2,0,0],[0,1/4,1/2,3/4],[3/4,1/2],1/12,1/4,1/2]*5/8*var.brk,amp=var(bldup+brk+drp,trk))

c1 >> play("X",dur=b3.dur, delay=P[[1/4,1/4],var([1/2, 1/4], [64, 32])] * var([1, 0], [256, 128]),sample=2,rate=2,amplify=P[[2/3, 3/5], [0.75, 0.5], 0.75, [1, 0.5]] * var([1, 0], [[64, 128, 64, 256], [32, [32, 128], 64]],amp=var(drp,trk))

b2 >> play("o",dur=b3.dur,delay=P[var([1, 1/2, 0], [32, 128]),[1/4,1/4],var([0, 0.25], 8),var([1/2, 0], [64, 32])] * var([1, 0], [[256, 128], [128, 256]]),bend=1,drive=1/8,room=3/4,mix=1/3,amplify=1/2,amp=var([1, 0], [[[128, 64], [256, 64, 32]], [[64, 128], [32, 64], 64]]) * 0.75)

c2 >> play("X",dur=var.mad,cut=var.mad*1.5,sample=var([1, 2], [256, 128]),rate=P[1, 1.05, 1, 0.97],drive=0,lpf=var([800, 600],64),lpr=0.25,amplify=P[1, 0.9] * 1.25 * var.brk,amp=var(bldup+brk+drp,trk))

sh >> play('s', sample=1, dur=0.25, lpf=P[1500, 500, 750, 1280, 50, 700] * 4, lpr=0.5, amp=P[[PWhite(0.5, 1), 0.25], 0.25, [0.75, [0.5, 1]], 1] * var([0, 1.5], [128, 128, 256, 128]))

b3 >> play("i",sample=var([0,1,2,3],trk),dur=[1] * int(var([15, 63, 7], 64)) + [0.5, 0.5],delay=1/2,room=1,mix=[0.25, [0.15, 0.2]],amplify=3/4,amp=var([0, 1], [[64, 128], [128, 256]]))

b4 >> play("-",dur=PRand([4,2,1,1/2,PDur(3,8)*2,PDur(3,7)*2],1/4),lpf=expvar([2000, 5000], [128, 0]), lpr=0.25, sample=2,pshift=[0,8],amplify=2/5,amp=var([1, 0], [[256, 128], [128, 64]]) * var.brk)

c4 >> play("[--]",rate=PRand([3/4,3/5,1,7/5]),sample=2,shape=linvar([1/7,3/5],16),lpf=expvar([2000, 5000], [128, 0]), lpr=0.25,pan=PWhite(-1,1),amplify=1/5,amp=var([0, 1], [[256, 128], [512, 256]])).every(PRand([2,4,8,16]),"stutter"),PRand([3,5])

s1 >> bass(P[:2],oct=6,dur=1/2,sus=1/4,shape=3/8,drive=2/8,lpf=1200,hpf=var([2000,linvar([500,900],16)],32),room=1/2,mix=1/3,amplify=2/5,amp=expvar([0, 1], 256) * var.brk * var([1, 0], [[64, [128, 32]], [32, 64, 128]]))

s2 >> varsaw(var.ch+P[:2],oct=4,dur=[1/4, 1/4, var([1/2, 1/4], [64, 32])],delay=[0,[1/4,1/4]],shape=linvar([1/3,2/5],8),drive=1/8,lpf=P[var([500, 400]), var([600, 350], 8)],lpr=0.25,formant=linvar([1,4],16),amplify=2/9,amp=var([1, 0], [[128, 256], [64, 128]]))

fh >> play('-', dur=0.25, pan=PWhite(-0.5, 0.5), amp=P[[1, 0.5], 0.75, 0.5, 1] * expvar([0, 1], [128, 0]))
oh >> play('-', sample=2, dur=1, delay=0.5, amp=c1.amp * var([0, 1.25], trk))
cl >> play('H', sample=1, dur=var([8, 4], [64, 32, 128, 64]), delay=0.5, amp=var([0, 0.25], [[64, 128, 32], [128, 256, 64]]))

print(PZip(in_, trk))

db >> dub(dur=1, sus=[1, 0.5], amp=P[1, 0.85] * 0.25 * 0)

var.ch = P[var([5, 4], trk), 4, var([4, 5, 3], trk), 2, 5, 5, 4, 4, 2, 1]
bl >> blip(
    var.ch,
    dur=P[var([1, 0.5], 256), var([1, 0.5], [28, 4]), [1, 0.5], [1, 0.5], var([1, 0.5], [28, 4]), var([1, 0.5], 256)],
    echo=0.5,
    echotime=P[var([0, 0.5], [256, 128, 64, 128]), 0, [0, var([0, 0.5], 128)], 0,  0, 0, 0, 0],
    sus=2,
    room=1, mix=expvar([0.15, 0.2], 64),
    drive=P[
        [0, var([0, 0.025], [64, 32])], 0, [0, 0.015, 0.01, 0.02], [var([0, 0.035], [128, 128, 64, 128, 128]), 0, [0, var([0, 0.05], [128, 32, 4, 4, 4, 4, 4, 4]), 0, 0], 0]
    ],
    lpf=[
        var([1200, 400, 650, 700], 32),
        var([1000, 1300], 8),
        [var([600, 700]), 350, 800, 1200],
        [var([2500, 500], 64), var([1250, 700], [32, 64, 32, 32])],
        [700, 1200, 1100, 900],
        [500, 1200, 300, 1500],
        [400, 200, var([300, 2000], 8), 1500],
        [var([1500, 1000, 750, 500], 64), var([500, 350], 8)]
    ], lpr=0.25,
    chop=4,
    amp=var([0.75, 0], [28, 4, 31, 1]) * var([1, 0], [[256, 128], [64, 128, 128]])
)
di >> dirt(
    dur=[var([1, 0.5], 64)] * 7 + [0.5, 0.5],
    drive=var([0.2, 0.1], [128, 64]), lpf=300, lpr=0.25, delay=0.5, bend=-0.25, sus=[0.4, 0.6],
    amp=P[1, [0.85, 1]] * var([1, 0], [[28, 31, 56], [4, 1, 8]]) * var.brk * expvar([0, 0, 1, 1], [[32, 64], [32, 64], [128, 256], 0])
)


