# https://soundcloud.com/kitty_clock/woodwind

Clock.bpm = 125

var.brk = var([1, 0], [28, 4, 31, 1, 31, 1, 56, 8])

az >> loop('aoe2_slavs', # AoE2 slav theme
    Pvar([
        P[P[4:8] * 0.5, P[8:10], P[2:4], P[2:3]].reverse(),
        P[1:4, 1:2, 6:2, 6:9],
        P[2:4, 2:1, 2:3, 4:1],
        P[2:4, 2:1, 2:3, 4:1,  2:4, 2:1, 2:3, 4:1,  1:4, 1:2, 6:2, 6:9,  2:4, 2:1, 2:3, 4:1],
        P[5:8, 5:6, 5:8, 2:3]
    ], 256),
    room=1, mix=0.15,
    hpf=expvar([200, 200, 800], [32, 32, 0]), hpr=0.2,
    rate=var([0.9, 1, 0.8], 64),
    dur=0.5,
    amp=expvar([1.5, 0], 512) * 0.500 # * P[1, 0, [0.5, 1], 0.25]
)

ti >> loop('tili', # Creepy russian song "Тили Тили Бом"
    Pvar([
        P[150, 160],
        P[64, 63],
        P[[60, 60, 59, 60], 59, 60, [60, 64]],
        P[100, 101, 100, var([140, 190], 32)],
        P[60, 62, 60, 59],
        P[80, 70, 78, 62],
    ], 256),
    dur=1,
    rate=var([0.9, 0.95, 1], 64),
    chop=0,
    hpf=expvar([1200, 800], [[16, 32, 64], 0]),
    hpr=var([1.35, 0.5], 512),
    tempo=Clock.bpm,
    amp=expvar([0.75, 0.25], [32, 32, [64, 0], 64]) * expvar([0, 1, 1], [128, inf]) * P[
        [[0.1, 0.75], 0.25, 0.5, 0.25], expvar([0.25, 0.5], [512, 256, 128]), P[0.7, 0.75], 0.15
    ] * 0.00
)

xx >> play('X', sample=var([0, 1, 2], 256), lpf=700, lpr=0.5, dur=1, amp=var([0, 1], [128, 256, 64, 512, 256, 128, 256, 512, 512, 256]) * var.brk)
x2 >> play('x', sample=1, dur=xx.dur / 2, delay=0.5, amp=P[[1, 0, 0, [0, 1]], 0, 0, [0, 0.25]] * xx.amp)
h1 >> play(':', dur=xx.dur, delay=0.5, room=1, mix=0.25, amp=var([0, 1], [32, 64, 64, 128, 128, 256, 256, 512]) * xx.amp)
ds >> play('X', sample=1, dur=var([2, 1], 512), delay=var([1, 0.25, 0.75, 0.5], 64) * var([1, 0], 512), hpf=80, hpr=0.25,
    amp=P[
        P[1, var([0, 1], [128, 256, 32, 64])], var([0, 1], [64, 32, 32, 128, 256, 32, 64, 128])
    ] * expvar([0, 1, 1], [256, inf]) * 0.75
)

rs >> play('I', sample=1, dur=2,
    amp=var([0, 1], [[64, 128], 512, 128, 256, 256, 128, 256, 512, 1024, 256]) * expvar([[0.25, 0.5], 1], [64, 64, 32, 32, 16, 16]) * var.brk
)
cl >> play('H', sample=2, dur=2, delay=P[1, var([1, 0.75], [256, 128, 128, 64])], amp=0.5 * rs.amp)
c2 >> play('H', dur=2, delay=P[0.5, var([0.75, 0.5], [128, 64, 256, 128])], amp=0.5 * rs.amp)
sh >> play('s',
    pan=PWhite(-0.85, 0.85),
    sample=0,
    dur=0.25,
    room=1,
    mix=0.25,
    amp=expvar([0, 1, 1], [128, inf]) * expvar([2, 0.5], 1/3) * P[var([0, 1], [128, 256]), 0, var([0, 1], [64, 128]), 1] * P[[1] * 8 + [0] * int(var([16, 8, 4, 2], 64))]
)
tt >> play('t', room=expvar([0, 1], [256, 0]), mix=0.25, sample=var([0, 1], 128), bend=-0.25, slide=-1, dur=0.25,
    amp=P[
        var([0, 2], [128, 64]), var([0, 0.75], [64, 128, 128, 32]), var([1, 0.25], [[16, 8], [8, 4]]), [0.5, var([0, 0.6], [[128, 64], [256, 32]])],
        0.25, 0, P[0.15, 0.25], var([0, 0.15, 0.25, 0.5], 64)
    ] * expvar([0, 1, 1], [256, inf]) * var.brk
)
var.d_amp = var([1, 0], [[512, 1024], 128, 256, 64, 128, 32])

db >> dab(-0.5,
    dur=P[0.5, 0.5, 1, 1, 1] * int(var([2, 1], [512, 256])),
    sus=P[0.25, 0.4, 1, 0.75, 0.75],
    oct=4.9,
    room=1,
    mix=0.5,
    lpf=P[var([500, 1500], [64, 32, 28, 4]), 600, [700, 300], P[500, 200, 550, 150], 500],
    lpr=expvar([0.5, 0.25], [128, 0]),
    hpf=var([0, 800], [[64, 32, 8, 4], [16, 4, 8, 8]]),
    hpr=expvar([0.25, 0.75], [[64, 128], 0]),
    amp=expvar([0, 1, 1], [512, inf]) * P[1, expvar([0, 1, 1], 512), expvar([0, 1, 1], [256, inf]), var([0, 1], [256, 512, 128, 512])] * var.d_amp * 0.0
)

d2 >> dab(
    dur=0.25,
    sus=P[var([0.15, 0.25], 1024), 0.15, 0.15, P[0.15, expvar([0.15, 0.3], [128, 256, 256, 512])]],
    chop=var([4, 2], [256, 128, 128, 256]),
    hpf=var([40, 60, 80], 256), lpf=var([140, 180, 120, 80, 90], [128, 64, 256, 128, 256, 256]), lpr=0.25, hpr=expvar([0.15, 0.15, 0.5], [[128, 256], 256, 0]),
    amp=expvar([1.5, 0], 1/8) * P[
        1, expvar([0, 0.75, 0.75], [256, inf]), P[0.5, expvar([0, 0.5], [256, 512, 128, 256])], [0.5, 0.75]
    ] * expvar([0, 1, 1], [512, inf]) * P[
        var([0, 1], [128, 512]), expvar([0, 1, 1], 1024), P[var([0, 1], [256, 512]), var([0, 0.5], [512, 1024])], expvar([0, 0, 1, 1], [256, 256, 128, 512])
    ] * var.d_amp
)

